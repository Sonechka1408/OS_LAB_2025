# Лабораторная работа №2 - Решения

Этот проект содержит решения для всех заданий лабораторной работы №2 по программированию на языке C.

## Структура проекта

```
new_lab2/
├── task1_swap/          # Задание 1: Функция Swap
├── task2_revert/        # Задание 2: Функция RevertString
├── task3_libraries/     # Задание 3: Библиотеки
│   ├── static/          # Статическая библиотека
│   └── dynamic/         # Динамическая библиотека
├── Makefile            # Файл сборки
└── README.md           # Этот файл
```

## Задание 1: Функция Swap

**Цель**: Реализовать функцию для обмена значениями двух символов.

**Файлы**:
- `swap.h` - заголовочный файл с объявлением функции
- `swap.c` - реализация функции Swap
- `main.c` - программа для тестирования

**Компиляция и запуск**:
```bash
cd task1_swap
gcc -Wall -Wextra -std=c99 main.c swap.c -o swap_program
./swap_program
```

**Ожидаемый результат**:
```
Before swap: a b
After swap: b a
```

## Задание 2: Функция RevertString

**Цель**: Реализовать функцию для переворота строки с использованием динамического выделения памяти.

**Файлы**:
- `revert_string.h` - заголовочный файл
- `revert_string.c` - реализация функции RevertString
- `main.c` - программа с аргументами командной строки

**Компиляция и запуск**:
```bash
cd task2_revert
gcc -Wall -Wextra -std=c99 main.c revert_string.c -o revert_program
./revert_program "Hello World"
```

**Ожидаемый результат**:
```
Original string: Hello World
Reverted string: dlroW olleH
```

## Задание 3: Статические и динамические библиотеки

### Статическая библиотека

**Цель**: Создать статическую библиотеку с функцией RevertString.

**Компиляция**:
```bash
cd task3_libraries/static
gcc -Wall -Wextra -std=c99 -c revert_string.c
ar rcs librevert.a revert_string.o
gcc -Wall -Wextra -std=c99 main.c -L. -lrevert -o static_program
./static_program "Hello World"
```

### Динамическая библиотека

**Цель**: Создать динамическую библиотеку с функцией RevertString.

**Компиляция**:
```bash
cd task3_libraries/dynamic
gcc -Wall -Wextra -std=c99 -fPIC -c revert_string.c
gcc -shared -fPIC revert_string.o -o librevert.so
gcc -Wall -Wextra -std=c99 main.c -L. -lrevert -o dynamic_program
LD_LIBRARY_PATH=. ./dynamic_program "Hello World"
```

## Использование Makefile

Для удобства компиляции всех заданий используется Makefile:

```bash
# Компиляция всех заданий
make all

# Компиляция отдельных заданий
make task1
make task2
make task3_static
make task3_dynamic

# Запуск тестов
make test_all
make test_task1
make test_task2
make test_task3_static
make test_task3_dynamic

# Очистка сгенерированных файлов
make clean
```

## Объяснение работы программ

### Задание 1 (Swap)
Программа демонстрирует работу с указателями в C. Функция `Swap` принимает два указателя на символы и меняет их значения местами, используя временную переменную.

### Задание 2 (RevertString)
Программа показывает:
- Работу с аргументами командной строки (`argc`, `argv`)
- Динамическое выделение памяти (`malloc`)
- Освобождение памяти (`free`)
- Алгоритм переворота строки "на месте"

### Задание 3 (Библиотеки)
Демонстрирует:
- Создание статических библиотек (`.a` файлы) с помощью `ar`
- Создание динамических библиотек (`.so` файлы) с флагом `-shared -fPIC`
- Линковку с библиотеками (`-L` для пути, `-l` для имени)
- Использование переменной окружения `LD_LIBRARY_PATH` для динамических библиотек

## Различия между статической и динамической линковкой

- **Статическая линковка**: Код библиотеки включается в исполняемый файл на этапе компиляции
- **Динамическая линковка**: Код библиотеки загружается во время выполнения программы

Преимущества статической линковки:
- Не требует наличия библиотеки в системе
- Более быстрый запуск программы

Преимущества динамической линковки:
- Меньший размер исполняемого файла
- Возможность обновления библиотеки без перекомпиляции программы
- Экономия памяти при использовании одной библиотеки несколькими программами
